# pytest.ini - VERSÃO FINAL
[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Opções padrão
addopts = 
    -v
    --tb=short
    --strict-markers
    -p no:warnings
    --cov=.
    --cov-report=term-missing
    --cov-report=html
    --cov-fail-under=65
    
# Marcadores
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: integration tests
    unit: unit tests
    async: async tests
    performance: performance benchmarks
    db: tests that require database
    network: tests that require network
    
# Filtros de warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::ResourceWarning
    
# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Configuração para testes async
asyncio_mode = auto

# Timeout para testes (em segundos)
timeout = 60
timeout_method = thread

# Ignorar diretórios específicos
norecursedirs = .venv venv env .git __pycache__ *.egg-info build dist

# Configuração do coverage
[tool:pytest]
filterwarnings = 
    ignore::UserWarning
    ignore::FutureWarning

# Para testes que usam fixtures específicas
usefixtures = 
    test_client
    test_database